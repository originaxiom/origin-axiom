# Origin Axiom — Phase 2  
## Reproducibility and Provenance

This document defines the **reproducibility guarantees, provenance tracking, and execution rules**
for Phase 2 of the Origin Axiom project.

All numerical results and figures in Phase 2 are required to conform to the standards described here.

---

## Reproducibility Philosophy

Phase 2 follows a strict principle:

> **No scientific claim is valid unless it is backed by a fully reproducible artifact.**

Reproducibility in Phase 2 is enforced through:
- explicit configuration files,
- deterministic execution,
- automated workflows,
- and complete metadata capture.

---

## Single Source of Truth

All tunable parameters are declared in a single file:

```
config/phase2.yaml
```

This includes:
- model parameters,
- sweep ranges,
- cosmological parameters,
- calibration and interpretation settings.

No parameter affecting numerical output may be hard-coded elsewhere.

---

## Determinism and Randomness Control

All numerical runs are deterministic up to machine precision.

- Any stochastic element is controlled by an explicit random seed.
- The seed is declared in `config/phase2.yaml`.
- No hidden randomness is permitted.

Re-running the same workflow with the same configuration on the same platform
should reproduce figures to numerical precision.

---

## Canonical Execution Path

The **canonical method** for reproducing all Phase 2 results is:

```bash
cd phase2
snakemake -c 1
```

This command:
- executes all required numerical runs,
- generates all canonical figures,
- compiles the Phase 2 paper.

Manual execution of individual scripts is permitted for development but does not
constitute an official reproduction.

---

## Snakemake Workflow Rules

Phase 2 uses **Snakemake** as the authoritative execution engine.

Rules enforced:

- Each Snakemake rule produces **one canonical artifact** (typically one figure).
- Canonical figures are written to:
  ```
  outputs/figures/
  ```
- Detailed run artifacts are written to:
  ```
  outputs/runs/<run_id>/
  ```
- Canonical figures are copied from their originating run directories.

No figure included in the paper may be generated outside Snakemake.

---

## Run Directory Structure

Each numerical run produces a unique run directory:

```
outputs/runs/<run_id>/
├─ meta.json
├─ params.json
├─ summary.json
├─ raw/
│  └─ *.npz
└─ figures/
   └─ *.pdf
```

### Required metadata

Each run directory must contain:

- `meta.json`
  - UTC timestamp
  - git commit hash
  - platform information
  - Python version
- `params.json`
  - full resolved configuration dictionary
- `summary.json`
  - machine-readable summary of results
- raw numerical data sufficient to regenerate figures

---

## Platform and Environment

Phase 2 is developed and tested using:

- Python ≥ 3.10
- NumPy
- Matplotlib
- Snakemake

Exact package versions are recorded in run metadata where available.

Reproduction on different platforms may result in minor floating-point differences,
which are considered acceptable if qualitative behavior is unchanged.

---

## Version Control and Provenance

All code and configuration files are version-controlled using Git.

Each run records:
- the exact git commit hash,
- the configuration snapshot used,
- the execution timestamp.

Results are therefore fully traceable to a unique repository state.

---

## Paper–Artifact Consistency

Every figure included in the Phase 2 paper:

- exists in `outputs/figures/`,
- is generated by Snakemake,
- corresponds to a claim listed in `CLAIMS.md`,
- has an associated run directory with full provenance.

No unpublished or ad hoc results are referenced.

---

## Limitations of Reproducibility

Reproducibility guarantees apply to:

- numerical behavior,
- qualitative trends,
- figure structure.

They do not extend to:
- exact floating-point bitwise identity across architectures,
- interpretation or theoretical framing beyond declared assumptions.

---

## Summary

Phase 2 results are:

- deterministic,
- fully scripted,
- parameter-transparent,
- and traceable to source.

This design is intentional and intended to meet or exceed the reproducibility
standards expected in contemporary computational cosmology.
