# Origin Axiom — Phase 2  
## Workflow Guide (Binding)

This document defines the **mandatory workflow rules** for Phase 2 of the Origin Axiom project.
All code, figures, and paper artifacts must comply with these rules.

This guide is **binding**. Deviations are considered errors.

---

## 1. Purpose of the Workflow

The Phase 2 workflow exists to ensure:

- full reproducibility,
- unambiguous provenance,
- strict separation between exploration and claims,
- and auditability at the level expected for publication in PRD / JCAP.

No result is valid unless produced through this workflow.

---

## 2. Phase Isolation Rules

Phase 2 is **fully isolated**.

- No runtime dependency on Phase 1 code or outputs.
- No retroactive modification of Phase 1 assumptions or claims.
- No sharing of configuration, data, or figures across phases.

Phase boundaries must be respected at all times.

---

## 3. Single Source of Truth

All tunable parameters must be declared in:

```
config/phase2.yaml
```

Rules:
- No hard-coded numerical constants affecting results.
- No hidden defaults.
- Any derived quantity must be recorded in metadata.

If a parameter is not in the YAML file, it does not exist.

---

## 4. Determinism and Seeds

- All stochastic behavior must be controlled by an explicit seed.
- The seed must be declared in the YAML file.
- Runs without fixed seeds are invalid.

Determinism is required up to floating-point precision.

---

## 5. Snakemake as Authority

**Snakemake is the authoritative execution engine**.

Rules:

- Every canonical artifact must be produced by a Snakemake rule.
- One rule → one canonical artifact.
- Canonical artifacts are typically:
  - one figure PDF, or
  - the compiled paper PDF.

Manual figure generation is prohibited.

---

## 6. Canonical vs Run Artifacts

Two classes of outputs exist:

### 6.1 Canonical Artifacts

Stored in:
```
outputs/figures/
```

These are:
- stable,
- paper-facing,
- referenced in claims and text.

### 6.2 Run Artifacts

Stored in:
```
outputs/runs/<run_id>/
```

These include:
- metadata,
- raw numerical outputs,
- intermediate figures.

Canonical artifacts must be copied from their originating run directories.

---

## 7. Run IDs and Naming

All runs must use a unique run ID of the form:

```
<task>_YYYYMMDDTHHMMSSZ
```

Examples:
- `figA_mode_sum_residual_20251226T000000Z`
- `figE_frw_comparison_20251226T013015Z`

Run IDs must appear:
- in directory names,
- in metadata,
- in logs.

---

## 8. Mandatory Run Metadata

Each run directory must contain:

- `meta.json`
  - UTC timestamp
  - git commit hash
  - platform info
  - Python version
- `params.json`
  - full resolved configuration
- `summary.json`
  - machine-readable results
- raw numerical data sufficient to regenerate figures

No exceptions.

---

## 9. Figures and Claims Discipline

Rules:

- Every figure included in the paper must:
  - exist in `outputs/figures/`,
  - be generated by Snakemake,
  - correspond to a claim in `CLAIMS.md`.
- Every claim must map to at least one figure.
- No exploratory or unused figures may appear in the paper.

Figures must say **one thing only**.

---

## 10. PROGRESS_LOG Discipline

Each phase must maintain a human-readable:

```
PROGRESS_LOG.md
```

This file records:
- design decisions,
- failed approaches,
- parameter explorations,
- scope cuts.

It is an **intellectual audit trail**, not a raw lab notebook.

---

## 11. Paper Integration Rules

- The Phase 2 paper lives in:
  ```
  paper/main.tex
  ```
- All figures included must exist in `outputs/figures/`.
- Claims in the paper must match `CLAIMS.md` exactly.
- No speculative claims or forward-looking statements are permitted.

---

## 12. What Is Explicitly Forbidden

- ❌ Manual figure generation
- ❌ Hidden parameters
- ❌ Phase-3 ideas in Phase-2 artifacts
- ❌ Claiming empirical confirmation
- ❌ Reinterpreting Phase 1

Violations invalidate results.

---

## 13. Freeze Rules

Once figures are declared canonical:

- Numerical code is frozen.
- Parameters are frozen.
- Only documentation and presentation may change.

Any change to results requires:
- a new run ID,
- an explicit log entry,
- and updated artifacts.

---

## 14. Mental Model

- Phase 1: establishes existence.
- Phase 2: disciplines and quantifies.
- Phase 3: may integrate and explain.
- Phase 4+: may unify or speculate carefully.

Phase 2 must not attempt to do more than its role.

---

## Summary

This workflow is designed to produce results that are:
- reproducible,
- auditable,
- modest in claims,
- and publication-ready.

Adherence to this guide is mandatory.
