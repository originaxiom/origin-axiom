{"record_format_version": 6, "code": "\n        set -euo pipefail\n        mkdir -p \"{RUN_BASE}\" \"{FIG_BASE}\"\n\n        SIG_NOW=\"{params.sig}\"\n        SIG_FILE=\"{output.sig}\"\n        RUNID_FILE=\"{output.runid}\"\n        FIG_OUT=\"{output.fig}\"\n        EXPECTED_REL=\"{params.expected_rel}\"\n\n        # Reuse existing run ONLY if signature matches and expected PDF exists.\n        if [ -f \"$SIG_FILE\" ] && [ -f \"$RUNID_FILE\" ]; then\n            SIG_OLD=\"$(tr -d ' \\n\\r' < \"$SIG_FILE\" || true)\"\n            RUN_ID_OLD=\"$(tr -d ' \\n\\r' < \"$RUNID_FILE\" || true)\"\n            if [ \"$SIG_OLD\" = \"$SIG_NOW\" ] && [ -n \"$RUN_ID_OLD\" ]; then\n                RUN_DIR=\"{RUN_BASE}/$RUN_ID_OLD\"\n                SRC_FIG=\"$RUN_DIR/$EXPECTED_REL\"\n                if [ -f \"$SRC_FIG\" ]; then\n                    cp \"$SRC_FIG\" \"$FIG_OUT\"\n                    exit 0\n                fi\n            fi\n        fi\n\n        TS=\"$(date -u +\"%Y%m%dT%H%M%SZ\")\"\n        RUN_ID=\"{params.prefix}_${{TS}}\"\n\n        {PY} -m phase2.modes.run_mode_sum \\\n            --config \"{CFG_PATH}\" \\\n            --task residual \\\n            --run-id \"$RUN_ID\"\n\n        SRC_FIG=\"{RUN_BASE}/$RUN_ID/$EXPECTED_REL\"\n        cp \"$SRC_FIG\" \"$FIG_OUT\"\n        echo \"$RUN_ID\" > \"$RUNID_FILE\"\n        echo \"$SIG_NOW\" > \"$SIG_FILE\"\n        ", "rule": "figA_mode_sum_residual", "input": ["/Users/dri/Documents/Projects/origin-axiom/phase2/config/phase2.yaml", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/modes/constraints.py", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/modes/mode_model.py", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/modes/run_mode_sum.py", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/observables.py", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/utils_meta.py"], "log": [], "params": ["'figA_mode_sum_residual'", "'figures/residual.pdf'"], "shellcmd": "\n        set -euo pipefail\n        mkdir -p \"/Users/dri/Documents/Projects/origin-axiom/phase2/outputs/runs\" \"/Users/dri/Documents/Projects/origin-axiom/phase2/outputs/figures\"\n\n        SIG_NOW=\"61fad6dfcf66a80f97224c175cfe95e5a2c0159abbfc9765650945f829c0a5b4\"\n        SIG_FILE=\"/Users/dri/Documents/Projects/origin-axiom/phase2/outputs/figures/figA_mode_sum_residual.sig.txt\"\n        RUNID_FILE=\"/Users/dri/Documents/Projects/origin-axiom/phase2/outputs/figures/figA_mode_sum_residual.run_id.txt\"\n        FIG_OUT=\"/Users/dri/Documents/Projects/origin-axiom/phase2/outputs/figures/figA_mode_sum_residual.pdf\"\n        EXPECTED_REL=\"figures/residual.pdf\"\n\n        # Reuse existing run ONLY if signature matches and expected PDF exists.\n        if [ -f \"$SIG_FILE\" ] && [ -f \"$RUNID_FILE\" ]; then\n            SIG_OLD=\"$(tr -d ' \\n\\r' < \"$SIG_FILE\" || true)\"\n            RUN_ID_OLD=\"$(tr -d ' \\n\\r' < \"$RUNID_FILE\" || true)\"\n            if [ \"$SIG_OLD\" = \"$SIG_NOW\" ] && [ -n \"$RUN_ID_OLD\" ]; then\n                RUN_DIR=\"/Users/dri/Documents/Projects/origin-axiom/phase2/outputs/runs/$RUN_ID_OLD\"\n                SRC_FIG=\"$RUN_DIR/$EXPECTED_REL\"\n                if [ -f \"$SRC_FIG\" ]; then\n                    cp \"$SRC_FIG\" \"$FIG_OUT\"\n                    exit 0\n                fi\n            fi\n        fi\n\n        TS=\"$(date -u +\"%Y%m%dT%H%M%SZ\")\"\n        RUN_ID=\"figA_mode_sum_residual_${TS}\"\n\n        PYTHONPATH=\"/Users/dri/Documents/Projects/origin-axiom/phase2/src\" python -m phase2.modes.run_mode_sum \\\n            --config \"/Users/dri/Documents/Projects/origin-axiom/phase2/config/phase2.yaml\" \\\n            --task residual \\\n            --run-id \"$RUN_ID\"\n\n        SRC_FIG=\"/Users/dri/Documents/Projects/origin-axiom/phase2/outputs/runs/$RUN_ID/$EXPECTED_REL\"\n        cp \"$SRC_FIG\" \"$FIG_OUT\"\n        echo \"$RUN_ID\" > \"$RUNID_FILE\"\n        echo \"$SIG_NOW\" > \"$SIG_FILE\"\n        ", "incomplete": false, "starttime": 1766885327.0978909, "endtime": 1766885328.7001, "job_hash": 277786387, "conda_env": null, "software_stack_hash": "d41d8cd98f00b204e9800998ecf8427e", "container_img_url": null, "input_checksums": {"/Users/dri/Documents/Projects/origin-axiom/phase2/config/phase2.yaml": "6d98187d21684ffe2817fc2686b5d8ab5f1a95b72fe15cc55e1f0e0770fd544a", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/modes/run_mode_sum.py": "3c9d44767fd9b179d2af68b1fff357c9fd30cb46771d98d4f9eddee065e0fd2d", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/modes/mode_model.py": "56f0788f44d381a5aeb626f1a3464118500c54fb6611f59b4523e62edcc67c3b", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/modes/constraints.py": "4913774c5b5eba59ed752cc0e9ae7c9945de93fec29c1760d76041835611d28b", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/observables.py": "392d59230c7bd545d4b72c48bdf9372a84c6b223009b4ed625918e63cc16f8b6", "/Users/dri/Documents/Projects/origin-axiom/phase2/src/phase2/utils_meta.py": "8fe2e96f3bb28cb6b3309207b184a3350c5926cba2a35a74511001bbc0498100"}}